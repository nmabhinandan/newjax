{"version":3,"sources":["newjax.js"],"names":[],"mappings":";;;;;;IACM,MAAM;AACC,WADP,MAAM,CACE,GAAG,EAAE;0BADb,MAAM;;AAER,QAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,QAAI,CAAC,OAAO,GAAG,GAAG,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;AACzC,QAAI,CAAC,EAAE,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAA,AAAC,EAAE;AAClD,UAAI,CAAC,cAAc,EAAE,CAAC;KACvB;GAEF;;eARG,MAAM;;WAUI,0BAAG;;;;AAEb,YAAI,EAAE,GAAG,MAAK,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC9B,UAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAK;AAClC,cAAI,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;AAClB,mBAAO;WACR;AACD,cAAI,KAAK,CAAC,cAAc,EAAE;AACxB,iBAAK,CAAC,cAAc,EAAE,CAAA;WACvB,MAAM;AACL,iBAAK,CAAC,WAAW,GAAG,KAAK,CAAC;WAC3B;;AAED,gBAAK,MAAM,CAAC,EAAE,CAAC,CAAC;SACjB,CAAC,CAAC;;;AAbL,WAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;OAc7C;KACF;;;WAEK,gBAAC,OAAO,EAAE;AACd,UAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;AACnB,cAAQ,CAAC,SAAS,CAAA;AAClB,WAAK,CAAC,OAAO,CAAC,IAAI,EAAE;AAClB,cAAM,EAAE,KAAK;AACb,eAAO,EAAE;AACP,kBAAQ,EAAE,IAAI;SACf;OACF,CAAC,CAAC,IAAI,CAAC,UAAS,QAAQ,EAAE;AACzB,eAAO,QAAQ,CAAC,IAAI,EAAE,CAAC;OACxB,CAAC,CAAC,IAAI,CAAC,UAAS,IAAI,EAAE;AACrB,WAAG,CAAC,SAAS,GAAG,IAAI,CAAC;OACtB,CAAC,CAAC;AACH,UAAI,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;;AAEpD,YAAM,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;KAC3C;;;SA5CG,MAAM","file":"newjax.js","sourcesContent":["\nclass NewJax {\n  constructor(elm) {\n    this.elm = elm;\n    this.anchors = elm.querySelectorAll('a');\n    if (!!(window.history && window.history.pushState)) {\n      this.registerEvents();\n    }\n\n  }\n\n  registerEvents() {\n    for (var i = 0; i < this.anchors.length; i++) {\n      let el = this.anchors.item(i);\n      el.addEventListener('click', (e) => {\n        if (e.button === 0) {\n          return;\n        }\n        if (event.preventDefault) {\n          event.preventDefault()\n        } else {\n          event.returnValue = false;\n        }\n\n        this.handle(el);\n      });\n    }\n  }\n\n  handle(element) {\n    let elm = this.elm;\n    document.pushState\n    fetch(element.href, {\n      method: 'get',\n      headers: {\n        'X-PJAX': true\n      }\n    }).then(function(response) {\n      return response.text();\n    }).then(function(body) {\n      elm.innerHTML = body;\n    });\n    let url = element.href.replace(/^.*\\/\\/[^\\/]+/, '');\n\n    window.history.pushState(null, null, url);\n  }\n}\n"],"sourceRoot":"/source/"}